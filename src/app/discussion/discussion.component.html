<div class="container">
    <!-- Left side for group list -->
    <div class="group-list" style="width: 20%; float: left;">
      <ul>
        <li *ngFor="let group of data" (click)="selectGroup(group)">
          {{ group.idGrpMsg }}
          <button class="delete-btn" (click)="deleteGroup(group.idGrpMsg); $event.stopPropagation()">
            Delete
          </button>
        </li>
      </ul>
      <button (click)="showPopup = true">Create Group</button>
    </div>
  
    <!-- Right side for displaying messages -->
    <div class="message-display" style="width: 75%; float: right;" *ngIf="selectedGroup">
      <h2>Messages in Group {{ selectedGroup.idGrpMsg }}</h2>
  
      <!-- If messages are available -->
      <div style="height: 90%;" *ngIf="messages && messages.length > 0">
        <div *ngFor="let message of messages" 
             class="message" 
             [ngClass]="{'sent-by-me': message.senderId === connectedUser}">
          <p><strong>Content:</strong> {{ message.contenu }}</p>
        </div>
      </div>
      
  
      <!-- If no messages -->
      <div *ngIf="messages.length === 0">
        <p>No messages available for this group.</p>
      </div>

      <div *ngIf="selectedGroup">
        <h3>Envoyer un message</h3>
        <textarea [(ngModel)]="messageContent" placeholder="Ã‰crire un message..."></textarea>
        <button (click)="EnvoyerMsg()">Envoyer</button>
      </div>
      

      
        

      
    </div>
  </div>
  <!-- Popup content -->
  <div *ngIf="showPopup" class="popup-overlay">
    <div class="popup-content">
      <h3>Select Users</h3>
  
      <div *ngFor="let user of users">
        
        <label>
          <img
          *ngIf="user?.photoProfil"
          [src]="'data:image/jpeg;base64,' + user.photoProfil"
          alt="User Profile"
          class="profile-image"
        />
          <input type="checkbox"
                 [value]="user.idUser"
                 (change)="onUserCheckboxChange($event, user)">
          {{ user.nomUser }} {{ user.prenomUser }}

        </label>
       
      </div>
  
      <button (click)="confirmSelection()">Confirm</button>
      <button (click)="showPopup = false">Cancel</button>
    </div>
  </div>
  