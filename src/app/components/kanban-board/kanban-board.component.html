<div class="app-container">
  <!-- Header -->
  <header class="header">
    <div class="logo">UniGit</div>
    <nav class="nav">
      <span>Projects ‚ñº</span>
      <span>Board</span>
      <span>Levels ‚ñº</span>
    </nav>
    <div class="search">
      <input type="text" placeholder="Search" />
      <button>üîç</button>
    </div>
    <div class="actions">
      <button>‚öôÔ∏è</button>
      <div class="avatar">YT</div>
    </div>
  </header>

  <!-- Main Content -->
  <div class="main">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="project-info">
        <div class="circle">logo</div>
        <h2>ProjectName</h2>
      </div>
      <div class="dropdown">Phases ‚ñº</div>
      <div class="dropdown">Levels ‚ñº</div>
      <div class="dropdown">Teams ‚ñº</div>
      <button class="create-btn">Create ‚ñº</button>
    </aside>

    <!-- Dashboard Content -->
    <div class="dashboard-container">
      <!-- Kanban Board -->
      <div class="board" cdkDropListGroup>
        <div
          *ngFor="let colonne of colonnes"
          cdkDropList
          [id]="colonne.titre"
          [cdkDropListData]="colonne.taches"
          [cdkDropListConnectedTo]="connectedColumns"
          (cdkDropListDropped)="drop($event)"
          class="column"
        >
          <div class="column-header">
            <h2>{{ colonne.titre }}</h2>
            <span class="task-count">{{ colonne.taches.length }}</span>
          </div>

          <!-- Liste des t√¢ches existantes -->
          <div
            cdkDrag
            *ngFor="let tache of colonne.taches"
            (click)="openTacheDetails(tache)"
            class="task-card"
          >
            <h4>{{ tache.titreTache }}</h4>
            <p class="assigned">Assign√©e √† : {{ tache.assigneA || 'Non assign√©e' }}</p>
          </div>

          <!-- Formulaire d'ajout rapide -->
          <div class="add-task-container" *ngIf="isAddingTask && newTache.statut === colonne.titre">
            <input
              type="text"
              [(ngModel)]="newTache.titreTache"
              placeholder="Saisir le titre de la t√¢che"
              (keyup.enter)="saveTacheForm()"
              autofocus
              class="add-task-input"
            >
            <div class="add-task-actions">
              <button (click)="saveTacheForm()" class="add-btn">Ajouter</button>
              <button (click)="resetForm()" class="cancel-btn">Annuler</button>
            </div>
          </div>

          <!-- Bouton d'ajout de t√¢che -->
          <button
            class="add-task-btn"
            (click)="initNewTask(colonne.titre)"
            *ngIf="!isAddingTask || newTache.statut !== colonne.titre"
          >
            + Cr√©er une t√¢che
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Task Details Modal -->
  <div class="overlay" *ngIf="selectedTache" (click)="closeTacheDetails()"></div>
  <div class="task-details" *ngIf="selectedTache">
    <h3>{{ selectedTache.titreTache }}</h3>
    <p><strong>Description:</strong> {{ selectedTache.descriptionTache }}</p>
    <p><strong>Status:</strong> {{ selectedTache.statut }}</p>
    <p><strong>Assigned to:</strong> {{ selectedTache.assigneA || 'Unassigned' }}</p>
    <button (click)="editTache(selectedTache)">Edit</button>
    <button (click)="deleteTache(selectedTache.idTache)">Delete</button>
    <button (click)="closeTacheDetails()">Close</button>
  </div>
</div>
